(this.webpackJsonpbankproject=this.webpackJsonpbankproject||[]).push([[0],{242:function(e,t,a){e.exports=a(257)},257:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(17),c=a.n(o),s=a(9),l=a(10),i=a(12),u=a(11),m=a(29),d=a(19),g=a(321),h=a(322),f=a(323),p=a(46),b=a.n(p),E=(a(249),a(237)),v=a(76),C=a(325),O=a(297),j=a(37),y=a(7),I=a(18),S=a(258),k=a(327),A=a(259),P=a(294),w=a(295),N=a(296),D=a(261),x=a(4),F=Object(I.a)("avatarButtonRef"),T=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(s.a)(this,a),r=t.call(this,e),Object.defineProperty(Object(j.a)(r),F,{writable:!0,value:Object(n.createRef)()}),r.handleAvatarButtonClick=function(){r.setState({open:!r.state.open})},r.handleClose=function(){r.setState({open:!1})},r.handleSignOutButtonClicked=function(){b.a.auth().signOut()},r.state={open:!1},r}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.user,n=this.state.open;return a?r.a.createElement("div",null,r.a.createElement(S.a,{className:t.avatarButton,ref:Object(y.a)(this,F)[F],onClick:this.handleAvatarButtonClick},r.a.createElement(k.a,{src:a.photoURL})),r.a.createElement(A.a,{open:n,anchorEl:Object(y.a)(this,F)[F].current,onClose:this.handleClose,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"}},r.a.createElement(P.a,{onClickAway:this.handleClose},r.a.createElement(E.a,{className:t.profileBox},r.a.createElement(v.a,{align:"center"},"Hello"),r.a.createElement(w.a,{className:t.divider}),r.a.createElement(v.a,{align:"center",variant:"body2"},a.displayName),r.a.createElement(v.a,{align:"center",variant:"body2"},a.email),r.a.createElement(w.a,{className:t.divider}),r.a.createElement(N.a,{container:!0,justify:"center"},r.a.createElement(N.a,{item:!0},r.a.createElement(D.a,{color:"primary",onClick:this.handleSignOutButtonClicked},"Logout"))))))):null}}]),a}(n.Component),L=Object(x.a)((function(e){return{avatarButton:{float:"right"},divider:{margin:e.spacing(1)},profileBox:{padding:e.spacing(1),background:e.palette.background.default}}}))(T),B=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleTabChange=function(e,t){n.setState({tabindex:t})},n.state={tabindex:0},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.user;return r.a.createElement(E.a,{variant:"outlined"},r.a.createElement(L,{user:e}),r.a.createElement(v.a,{variant:"h3",component:"h1",align:"center"},"HdM Bank Administration"),r.a.createElement(v.a,{variant:"h4",component:"h2",align:"center"},"Client Advisor Home"),e?r.a.createElement(C.a,{indicatorColor:"primary",textColor:"primary",centered:!0,value:this.state.tabindex,onChange:this.handleTabChange},r.a.createElement(O.a,{label:"Customers",component:m.b,to:"/customers"}),r.a.createElement(O.a,{label:"All Accounts",component:m.b,to:"/accounts"}),r.a.createElement(O.a,{label:"About",component:m.b,to:"/about"})):null)}}]),a}(n.Component),R=a(47),M=a(304),U=a(306),J=a(99),V=a.n(J),W=a(233),_=a.n(W),H=function(){function e(){Object(s.a)(this,e),this.id=0}return Object(l.a)(e,[{key:"setID",value:function(e){this.id=e}},{key:"getID",value:function(){return this.id}},{key:"toString",value:function(){var e="";for(var t in this)e+=t+": "+this[t]+" ";return e}}]),e}(),z=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e,n){var r;return Object(s.a)(this,a),(r=t.call(this)).first_name=e,r.last_name=n,r}return Object(l.a)(a,[{key:"setFirstName",value:function(e){this.first_name=e}},{key:"getFirstName",value:function(){return this.first_name}},{key:"setLastName",value:function(e){this.last_name=e}},{key:"getLastName",value:function(){return this.last_name}}],[{key:"fromJSON",value:function(e){var t=[];if(Array.isArray(e))e.forEach((function(e){Object.setPrototypeOf(e,a.prototype),t.push(e)}));else{var n=e;Object.setPrototypeOf(n,a.prototype),t.push(n)}return t}}]),a}(H),q=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e,n,r){var o;return Object(s.a)(this,a),(o=t.call(this)).source_account=e,o.target_account=n,o.amount=r,o}return Object(l.a)(a,[{key:"setSourceAccount",value:function(e){this.source_account=e}},{key:"getSourceAccount",value:function(){return this.source_account}},{key:"setTargetAccount",value:function(e){this.target_account=e}},{key:"getTargetAccount",value:function(){return this.target_account}},{key:"setAmount",value:function(e){this.amount=e}},{key:"getAmount",value:function(){return this.amount}}],[{key:"fromJSON",value:function(e){var t=[];if(Array.isArray(e))e.forEach((function(e){Object.setPrototypeOf(e,a.prototype),t.push(e)}));else{var n=e;Object.setPrototypeOf(n,a.prototype),t.push(n)}return t}}]),a}(H),G=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this)).owner=e,n}return Object(l.a)(a,[{key:"setOwner",value:function(e){this.owner=e}},{key:"getOwner",value:function(){return this.owner}}],[{key:"fromJSON",value:function(e){var t=[];if(Array.isArray(e))e.forEach((function(e){Object.setPrototypeOf(e,a.prototype),t.push(e)}));else{var n=e;Object.setPrototypeOf(n,a.prototype),t.push(n)}return t}}]),a}(H),K=Object(I.a)("api"),Q=Object(I.a)("bankServerBaseURL"),X=Object(I.a)("currencyFormatter"),Y=Object(I.a)("currency"),Z=Object(I.a)("getCustomersURL"),$=Object(I.a)("addCustomerURL"),ee=Object(I.a)("getCustomerURL"),te=Object(I.a)("updateCustomerURL"),ae=Object(I.a)("deleteCustomerURL"),ne=Object(I.a)("searchCustomerURL"),re=Object(I.a)("getAllAccountsURL"),oe=Object(I.a)("getAccountsForCustomerURL"),ce=Object(I.a)("addAccountsForCustomerURL"),se=Object(I.a)("getBalanceForAccountURL"),le=Object(I.a)("deleteAccountIdURL"),ie=Object(I.a)("getCreditsForAccountIdURL"),ue=Object(I.a)("getDebitsForAccountIdURL"),me=Object(I.a)("addTransactionURL"),de=Object(I.a)("fetchAdvanced"),ge=function(){function e(){var t=this;Object(s.a)(this,e),Object.defineProperty(this,Q,{writable:!0,value:"/bank"}),Object.defineProperty(this,X,{writable:!0,value:new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"})}),Object.defineProperty(this,Y,{writable:!0,value:"\u20ac"}),Object.defineProperty(this,Z,{writable:!0,value:function(){return"".concat(Object(y.a)(t,Q)[Q],"/customers")}}),Object.defineProperty(this,$,{writable:!0,value:function(){return"".concat(Object(y.a)(t,Q)[Q],"/customers")}}),Object.defineProperty(this,ee,{writable:!0,value:function(e){return"".concat(Object(y.a)(t,Q)[Q],"/customers/").concat(e)}}),Object.defineProperty(this,te,{writable:!0,value:function(e){return"".concat(Object(y.a)(t,Q)[Q],"/customers/").concat(e)}}),Object.defineProperty(this,ae,{writable:!0,value:function(e){return"".concat(Object(y.a)(t,Q)[Q],"/customers/").concat(e)}}),Object.defineProperty(this,ne,{writable:!0,value:function(e){return"".concat(Object(y.a)(t,Q)[Q],"/customers-by-name/").concat(e)}}),Object.defineProperty(this,re,{writable:!0,value:function(){return"".concat(Object(y.a)(t,Q)[Q],"/accounts")}}),Object.defineProperty(this,oe,{writable:!0,value:function(e){return"".concat(Object(y.a)(t,Q)[Q],"/customers/").concat(e,"/accounts")}}),Object.defineProperty(this,ce,{writable:!0,value:function(e){return"".concat(Object(y.a)(t,Q)[Q],"/customers/").concat(e,"/accounts")}}),Object.defineProperty(this,se,{writable:!0,value:function(e){return"".concat(Object(y.a)(t,Q)[Q],"/accounts/").concat(e,"/balance")}}),Object.defineProperty(this,le,{writable:!0,value:function(e){return"".concat(Object(y.a)(t,Q)[Q],"/accounts/").concat(e)}}),Object.defineProperty(this,ie,{writable:!0,value:function(e){return"".concat(Object(y.a)(t,Q)[Q],"/account/").concat(e,"/credits")}}),Object.defineProperty(this,ue,{writable:!0,value:function(e){return"".concat(Object(y.a)(t,Q)[Q],"/account/").concat(e,"/debits")}}),Object.defineProperty(this,me,{writable:!0,value:function(){return"".concat(Object(y.a)(t,Q)[Q],"/transactions")}}),Object.defineProperty(this,de,{writable:!0,value:function(e,t){return fetch(e,t).then((function(e){if(!e.ok)throw Error("".concat(e.status," ").concat(e.statusText));return e.json()}))}})}return Object(l.a)(e,[{key:"getCurrencyFormatter",value:function(){return Object(y.a)(this,X)[X]}},{key:"getCurrency",value:function(){return Object(y.a)(this,Y)[Y]}},{key:"getCustomers",value:function(){return Object(y.a)(this,de)[de](Object(y.a)(this,Z)[Z]()).then((function(e){var t=z.fromJSON(e);return new Promise((function(e){e(t)}))}))}},{key:"getCustomer",value:function(e){return Object(y.a)(this,de)[de](Object(y.a)(this,ee)[ee](e)).then((function(e){var t=z.fromJSON(e)[0];return new Promise((function(e){e(t)}))}))}},{key:"addCustomer",value:function(e){return Object(y.a)(this,de)[de](Object(y.a)(this,$)[$](),{method:"POST",headers:{Accept:"application/json, text/plain","Content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){var t=z.fromJSON(e)[0];return new Promise((function(e){e(t)}))}))}},{key:"updateCustomer",value:function(e){return Object(y.a)(this,de)[de](Object(y.a)(this,te)[te](e.getID()),{method:"PUT",headers:{Accept:"application/json, text/plain","Content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){var t=z.fromJSON(e)[0];return new Promise((function(e){e(t)}))}))}},{key:"deleteCustomer",value:function(e){return Object(y.a)(this,de)[de](Object(y.a)(this,ae)[ae](e),{method:"DELETE"}).then((function(e){var t=z.fromJSON(e)[0];return new Promise((function(e){e(t)}))}))}},{key:"searchCustomer",value:function(e){return Object(y.a)(this,de)[de](Object(y.a)(this,ne)[ne](e)).then((function(e){var t=z.fromJSON(e);return new Promise((function(e){e(t)}))}))}},{key:"getAllAccounts",value:function(){return Object(y.a)(this,de)[de](Object(y.a)(this,re)[re]()).then((function(e){var t=G.fromJSON(e);return new Promise((function(e){e(t)}))}))}},{key:"getAccountsForCustomer",value:function(e){return Object(y.a)(this,de)[de](Object(y.a)(this,oe)[oe](e)).then((function(e){var t=G.fromJSON(e);return new Promise((function(e){e(t)}))}))}},{key:"deleteAccount",value:function(e){return Object(y.a)(this,de)[de](Object(y.a)(this,le)[le](e),{method:"DELETE"}).then((function(e){var t=G.fromJSON(e)[0];return new Promise((function(e){e(t)}))}))}},{key:"addAccountForCustomer",value:function(e){return Object(y.a)(this,de)[de](Object(y.a)(this,ce)[ce](e),{method:"POST"}).then((function(e){var t=G.fromJSON(e)[0];return new Promise((function(e){e(t)}))}))}},{key:"getBalanceOfAccount",value:function(e){return Object(y.a)(this,de)[de](Object(y.a)(this,se)[se](e)).then((function(e){return new Promise((function(t){t(e)}))}))}},{key:"getCreditsForAccount",value:function(e){return Object(y.a)(this,de)[de](Object(y.a)(this,ie)[ie](e)).then((function(e){var t=q.fromJSON(e);return new Promise((function(e){e(t)}))}))}},{key:"getDebitsForAccount",value:function(e){return Object(y.a)(this,de)[de](Object(y.a)(this,ue)[ue](e)).then((function(e){var t=q.fromJSON(e);return new Promise((function(e){e(t)}))}))}},{key:"addTransaction",value:function(e){return Object(y.a)(this,de)[de](Object(y.a)(this,me)[me](),{method:"POST",headers:{Accept:"application/json, text/plain","Content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){var t=q.fromJSON(e)[0];return new Promise((function(e){e(t)}))}))}}],[{key:"getAPI",value:function(){return null==Object(y.a)(this,K)[K]&&(Object(y.a)(this,K)[K]=new e),Object(y.a)(this,K)[K]}}]),e}();Object.defineProperty(ge,K,{writable:!0,value:null});var he=a(324),fe=a(298),pe=a(224),be=a.n(pe),Ee=Object(I.a)("standardText"),ve=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),Object.defineProperty(Object(j.a)(e),Ee,{writable:!0,value:"This should not have happend. Soooo sorry..."}),e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.error,n=e.contextErrorMsg,o=e.onReload;return null!==a?r.a.createElement(he.a,{severity:"error",className:t.root},r.a.createElement("div",null,Object(y.a)(this,Ee)[Ee]),r.a.createElement(fe.a,null,n),r.a.createElement("div",{className:t.margins},"Error message (for debugging only) is:"),r.a.createElement("div",null,a.message),o?r.a.createElement("div",{className:t.margins},r.a.createElement(D.a,{variant:"contained",color:"primary",startIcon:r.a.createElement(be.a,null),onClick:o},"Reload")):null):null}}]),a}(n.Component),Ce=Object(x.a)((function(e){return{margins:{marginTop:e.spacing(2)}}}))(ve),Oe=a(299),je=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes;return e.show?r.a.createElement("div",{className:t.root},r.a.createElement(Oe.a,{color:"secondary"})):null}}]),a}(n.Component),ye=Object(x.a)((function(e){return{root:{width:"100%",marginTop:e.spacing(2)}}}))(je),Ie=a(66),Se=a(300),ke=a(301),Ae=a(302),Pe=a(303),we=a(305),Ne=a(63),De=a.n(Ne),xe=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).addCustomer=function(){var e=new z(n.state.firstName,n.state.lastName);ge.getAPI().addCustomer(e).then((function(e){n.setState(n.baseState),n.props.onClose(e)})).catch((function(e){return n.setState({updatingInProgress:!1,updatingError:e})})),n.setState({updatingInProgress:!0,updatingError:null})},n.updateCustomer=function(){var e=Object.assign(new z,n.props.customer);e.setFirstName(n.state.firstName),e.setLastName(n.state.lastName),ge.getAPI().updateCustomer(e).then((function(t){n.setState({updatingInProgress:!1,updatingError:null}),n.baseState.firstName=n.state.firstName,n.baseState.lastName=n.state.lastName,n.props.onClose(e)})).catch((function(e){return n.setState({updatingInProgress:!1,updatingError:e})})),n.setState({updatingInProgress:!0,updatingError:null})},n.textFieldValueChange=function(e){var t,a=!1;0===e.target.value.trim().length&&(a=!0),n.setState((t={},Object(Ie.a)(t,e.target.id,e.target.value),Object(Ie.a)(t,e.target.id+"ValidationFailed",a),Object(Ie.a)(t,e.target.id+"Edited",!0),t))},n.handleClose=function(){n.setState(n.baseState),n.props.onClose(null)};var r="",o="";return e.customer&&(r=e.customer.getFirstName(),o=e.customer.getLastName()),n.state={firstName:r,firstNameValidationFailed:!1,firstNameEdited:!1,lastName:o,lastNameValidationFailed:!1,lastNameEdited:!1,addingInProgress:!1,updatingInProgress:!1,addingError:null,updatingError:null},n.baseState=n.state,n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.customer,n=e.show,o=this.state,c=o.firstName,s=o.firstNameValidationFailed,l=o.firstNameEdited,i=o.lastName,u=o.lastNameValidationFailed,m=o.lastNameEdited,d=o.addingInProgress,g=o.addingError,h=o.updatingInProgress,f=o.updatingError,p="",b="";return a?(p="Update a customer",b="Customer ID: ".concat(a.getID())):(p="Create a new customer",b="Enter customer data"),n?r.a.createElement(Se.a,{open:n,onClose:this.handleClose,maxWidth:"xs"},r.a.createElement(ke.a,{id:"form-dialog-title"},p,r.a.createElement(S.a,{className:t.closeButton,onClick:this.handleClose},r.a.createElement(De.a,null))),r.a.createElement(Ae.a,null,r.a.createElement(Pe.a,null,b),r.a.createElement("form",{className:t.root,noValidate:!0,autoComplete:"off"},r.a.createElement(M.a,{autoFocus:!0,type:"text",required:!0,fullWidth:!0,margin:"normal",id:"firstName",label:"First name:",value:c,onChange:this.textFieldValueChange,error:s,helperText:s?"The first name must contain at least one character":" "}),r.a.createElement(M.a,{type:"text",required:!0,fullWidth:!0,margin:"normal",id:"lastName",label:"Last name:",value:i,onChange:this.textFieldValueChange,error:u,helperText:u?"The last name must contain at least one character":" "})),r.a.createElement(ye,{show:d||h}),a?r.a.createElement(Ce,{error:f,contextErrorMsg:"The customer ".concat(a.getID()," could not be updated."),onReload:this.updateCustomer}):r.a.createElement(Ce,{error:g,contextErrorMsg:"The customer could not be added.",onReload:this.addCustomer})),r.a.createElement(we.a,null,r.a.createElement(D.a,{onClick:this.handleClose,color:"secondary"},"Cancel"),a?r.a.createElement(D.a,{disabled:s||u,variant:"contained",onClick:this.updateCustomer,color:"primary"},"Update"):r.a.createElement(D.a,{disabled:s||!l||u||!m,variant:"contained",onClick:this.addCustomer,color:"primary"},"Add"))):null}}]),a}(n.Component),Fe=Object(x.a)((function(e){return{root:{width:"100%"},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))(xe),Te=a(328),Le=a(311),Be=a(313),Re=a(312),Me=a(232),Ue=a.n(Me),Je=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).deleteCustomer=function(){ge.getAPI().deleteCustomer(n.props.customer.getID()).then((function(e){n.setState({deletingInProgress:!1,deletingError:null}),n.props.onClose(n.props.customer)})).catch((function(e){return n.setState({deletingInProgress:!1,deletingError:e})})),n.setState({deletingInProgress:!0,deletingError:null})},n.handleClose=function(){n.props.onClose(null)},n.state={deletingInProgress:!1,deletingError:null},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.customer,n=e.show,o=this.state,c=o.deletingInProgress,s=o.deletingError;return n?r.a.createElement(Se.a,{open:n,onClose:this.handleClose},r.a.createElement(ke.a,{id:"delete-dialog-title"},"Delete customer",r.a.createElement(S.a,{className:t.closeButton,onClick:this.handleClose},r.a.createElement(De.a,null))),r.a.createElement(Ae.a,null,r.a.createElement(Pe.a,null,"Really delete customer '",a.getFirstName()," ",a.getLastName(),"' (ID: ",a.getID(),")?"),r.a.createElement(ye,{show:c}),r.a.createElement(Ce,{error:s,contextErrorMsg:"The customer '".concat(a.getFirstName()," ").concat(a.getLastName(),"' (ID: ").concat(a.getID(),") could not be deleted."),onReload:this.deleteCustomer})),r.a.createElement(we.a,null,r.a.createElement(D.a,{onClick:this.handleClose,color:"secondary"},"Cancel"),r.a.createElement(D.a,{variant:"contained",onClick:this.deleteCustomer,color:"primary"},"Delete"))):null}}]),a}(n.Component),Ve=Object(x.a)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))(Je),We=a(271),_e=a(269),He=a(308),ze=a(309),qe=a(231),Ge=a.n(qe),Ke=a(230),Qe=a.n(Ke),Xe=a(124),Ye=a.n(Xe),Ze=a(227),$e=a(228),et=a(307),tt=a(229),at=a.n(tt),nt=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).initialState={customerName:"",transferAmount:"",targetCustomers:[],selectedCustomer:null,selectedAccount:null,transferAmountValidationFailed:!1,transferAmountFieldEdited:!1,loadingInProgress:!1,customerSearchError:null,transactionError:null},n.searchCustomer=Object($e.a)(Ye.a.mark((function e(){var t,a,r,o,c,s,l,i;return Ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=n.state.customerName).length>0)){e.next=38;break}return e.prev=2,n.setState({targetCustomers:[],selectedCustomer:null,loadingInProgress:!0,customerSearchError:null}),e.next=6,ge.getAPI().searchCustomer(t);case 6:a=e.sent,r=Object(Ze.a)(a),e.prev=8,r.s();case 10:if((o=r.n()).done){e.next=18;break}return c=o.value,e.next=14,ge.getAPI().getAccountsForCustomer(c.getID());case 14:s=e.sent,c.accounts=s;case 16:e.next=10;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(8),r.e(e.t0);case 23:return e.prev=23,r.f(),e.finish(23);case 26:l=null,i=null,a.length>0&&(l=a[0]),l.accounts.length>0&&(i=l.accounts[0]),n.setState({targetCustomers:a,selectedCustomer:l,selectedAccount:i,loadingInProgress:!1,customerSearchError:null}),e.next=36;break;case 33:e.prev=33,e.t1=e.catch(2),n.setState({targetCustomers:[],selectedCustomer:null,loadingInProgress:!1,customerSearchError:e.t1});case 36:e.next=39;break;case 38:n.setState({customerNotFound:!0});case 39:case"end":return e.stop()}}),e,null,[[2,33],[8,20,23,26]])}))),n.transferMoney=function(){var e=n.props.account,t=n.state,a=t.selectedAccount,r=t.transferAmount.replace(/,/g,"."),o=new q(e.getID(),a.getID(),r);ge.getAPI().addTransaction(o).then((function(e){n.setState({loadingInProgress:!1,transactionError:null}),n.handleClose(e)})).catch((function(e){n.setState({loadingInProgress:!1,transactionError:e})})),n.setState({loadingInProgress:!0,transactionError:null})},n.handleClose=function(e){n.setState(n.initialState),n.props.onClose(e)},n.textFieldValueChange=function(e){var t=e.target.value;if("transferAmount"===e.target.id){var a=!1,r=t.replace(/,/g,".");0===r.length&&(a=!0),isNaN(r)&&(a=!0),n.setState({transferAmountValidationFailed:a,transferAmountFieldEdited:!0})}n.setState(Object(Ie.a)({},e.target.id,t))},n.customerSelectionChange=function(e){var t=e.target.value,a=null;t.accounts.length>0&&(a=t.accounts[0]),n.setState({selectedCustomer:t,selectedAccount:a})},n.accountSelectionChange=function(e){var t=e.target.value;n.setState({selectedAccount:t})},n.state=n.initialState,n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.show,n=e.customer,o=e.account,c=this.state,s=c.customerName,l=c.targetCustomers,i=c.selectedCustomer,u=c.customerNotFound,m=c.selectedAccount,d=c.loadingInProgress,g=c.transferAmountValidationFailed,h=c.transferAmountFieldEdited,f=c.customerSearchError,p=c.transactionError;return a?r.a.createElement(Se.a,{open:a,onClose:this.handleClose,maxWidth:"md"},r.a.createElement(ke.a,{id:"form-dialog-title"},"Transfer money",r.a.createElement(S.a,{className:t.closeButton,onClick:this.handleClose},r.a.createElement(De.a,null))),r.a.createElement(Ae.a,null,r.a.createElement(N.a,{container:!0,spacing:1},r.a.createElement(N.a,{item:!0,xs:6},r.a.createElement(v.a,{variant:"body1"},"From customer: ",n.getLastName(),", ",n.getFirstName())),r.a.createElement(N.a,{item:!0,xs:6},r.a.createElement(v.a,{variant:"body1"},"Account: ",o.getID()))),r.a.createElement(v.a,{variant:"body1"},r.a.createElement("br",null),"to customer:"),r.a.createElement("form",{noValidate:!0,autoComplete:"off"},0===l.length?r.a.createElement(M.a,{autoFocus:!0,fullWidth:!0,margin:"normal",type:"text",required:!0,id:"customerName",label:"Customer name:",onChange:this.textFieldValueChange,onBlur:this.searchCustomer,error:u,helperText:u?"No customers with the given name have been found":" ",InputProps:{endAdornment:r.a.createElement(U.a,{position:"end"},r.a.createElement(S.a,{onClick:this.searchCustomer},r.a.createElement(at.a,null)))}}):r.a.createElement(M.a,{select:!0,autoFocus:!0,fullWidth:!0,margin:"normal",type:"text",required:!0,id:"customerName",label:"Customer name:",value:i,onChange:this.customerSelectionChange},this.state.targetCustomers.map((function(e){return r.a.createElement(et.a,{key:e.getID(),value:e},e.getLastName(),", ",e.getFirstName())}))),m?r.a.createElement(M.a,{select:!0,fullWidth:!0,margin:"normal",type:"text",required:!0,id:"account",label:"Target account:",value:m,onChange:this.accountSelectionChange},i.accounts.map((function(e){return r.a.createElement(et.a,{key:e.getID(),value:e},e.getID())}))):r.a.createElement(M.a,{select:!0,fullWidth:!0,margin:"normal",type:"text",required:!0,id:"account",label:"Target account:",value:0,onChange:this.accountSelectionChange},r.a.createElement(et.a,{value:0},"No accounts found")),r.a.createElement(M.a,{fullWidth:!0,margin:"normal",type:"text",required:!0,id:"transferAmount",label:"Amount:",onChange:this.textFieldValueChange,error:g,helperText:g?"The amount must be a number":" ",InputProps:{startAdornment:r.a.createElement(U.a,{position:"start"},ge.getAPI().getCurrency())}})),r.a.createElement(ye,{show:d}),r.a.createElement(Ce,{error:f,contextErrorMsg:"Customer ".concat(s," could not be searched."),onReload:this.searchCustomer}),r.a.createElement(Ce,{error:p,contextErrorMsg:"Transaction could not be executed.",onReload:this.transferMoney})),r.a.createElement(we.a,null,r.a.createElement(D.a,{onClick:this.handleClose,color:"secondary"},"Cancel"),r.a.createElement(D.a,{disabled:!i||!m||!h||g,variant:"contained",color:"primary",onClick:this.transferMoney},"Transfer"))):null}}]),a}(n.Component),rt=Object(x.a)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))(nt),ot=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).getBalance=function(){ge.getAPI().getBalanceOfAccount(n.props.account.getID()).then((function(e){return n.setState({balance:e,loadingInProgress:!1,loadingError:null})})).catch((function(e){return n.setState({balance:null,loadingInProgress:!1,loadingError:e})})),n.setState({balance:"loading",loadingInProgress:!0,loadingError:null})},n.deleteAccount=function(){var e=n.props.account;ge.getAPI().deleteAccount(e.getID()).then((function(){n.setState({deletingInProgress:!1,deletingError:null}),n.props.onAccountDeleted(e)})).catch((function(e){return n.setState({deletingInProgress:!1,deletingError:e})})),n.setState({deletingInProgress:!0,deletingError:null})},n.transferMoney=function(){n.setState({showMoneyTransferDialog:!0})},n.moneyTransferDialogClosed=function(e){n.setState({showMoneyTransferDialog:!1}),e&&n.getBalance()},n.state={balance:"",loadingInProgress:!1,deletingInProgress:!1,loadingError:null,deletingError:null,showMoneyTransferDialog:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getBalance()}},{key:"componentDidUpdate",value:function(e){this.props.show&&this.props.show!==e.show&&this.getBalance()}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.customer,n=e.account,o=this.state,c=o.loadingInProgress,s=o.deletingInProgress,l=o.loadingError,i=o.deletingError,u=o.balance,d=o.showMoneyTransferDialog;return r.a.createElement("div",null,r.a.createElement(We.a,null,r.a.createElement(v.a,{className:t.accountEntry},r.a.createElement(He.a,{component:m.b,to:{pathname:"/transactions",owner:{customer:a,account:n}}},"Account ID: ",n.getID())),r.a.createElement(v.a,{color:"textSecondary"},"Balance: ",isNaN(u)?u:ge.getAPI().getCurrencyFormatter().format(u)),r.a.createElement(ze.a,null,r.a.createElement(D.a,{className:t.buttonMargin,variant:"outlined",color:"primary",size:"small",startIcon:r.a.createElement(Qe.a,null),onClick:this.transferMoney},"Transfer"),r.a.createElement(D.a,{color:"secondary",size:"small",startIcon:r.a.createElement(Ge.a,null),onClick:this.deleteAccount},"Delete"))),r.a.createElement(We.a,null,r.a.createElement(ye,{show:c||s}),r.a.createElement(Ce,{error:l,contextErrorMsg:"The balance of account ".concat(n.getID()," could not be loaded."),onReload:this.getBalance}),r.a.createElement(Ce,{error:i,contextErrorMsg:"The account ".concat(n.getID()," could not be deleted."),onReload:this.deleteAccount})),r.a.createElement(rt,{show:d,customer:a,account:n,onClose:this.moneyTransferDialogClosed}))}}]),a}(n.Component),ct=Object(x.a)((function(e){return{root:{width:"100%"},buttonMargin:{marginRight:e.spacing(2)},accountEntry:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0}}}))(ot),st=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).getAccounts=function(){ge.getAPI().getAccountsForCustomer(n.props.customer.getID()).then((function(e){return n.setState({accounts:e,loadingInProgress:!1,loadingAccountError:null})})).catch((function(e){return n.setState({accounts:[],loadingInProgress:!1,loadingAccountError:e})})),n.setState({loadingInProgress:!0,loadingAccountError:null})},n.addAccount=function(){ge.getAPI().addAccountForCustomer(n.props.customer.getID()).then((function(e){n.setState({accounts:[].concat(Object(R.a)(n.state.accounts),[e]),loadingInProgress:!1,addingAccountError:null})})).catch((function(e){return n.setState({accounts:[],loadingInProgress:!1,addingAccountError:e})})),n.setState({loadingInProgress:!0,addingAccountError:null})},n.deleteAccountHandler=function(e){n.setState({accounts:n.state.accounts.filter((function(t){return t.getID()!==e.getID()}))})},n.state={accounts:[],loadingInProgress:!1,loadingAccountError:null,addingAccountError:null},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getAccounts()}},{key:"componentDidUpdate",value:function(e){}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.customer,o=this.state,c=o.accounts,s=o.loadingInProgress,l=o.loadingAccountError,i=o.addingAccountError;return r.a.createElement("div",{className:a.root},r.a.createElement(_e.a,{className:a.accountList},c.map((function(t){return r.a.createElement(ct,{key:t.getID(),customer:n,account:t,onAccountDeleted:e.deleteAccountHandler,show:e.props.show})})),r.a.createElement(We.a,null,r.a.createElement(ye,{show:s}),r.a.createElement(Ce,{error:l,contextErrorMsg:"List of accounts for customer ".concat(n.getID()," could not be loaded."),onReload:this.getAccounts}),r.a.createElement(Ce,{error:i,contextErrorMsg:"Account for customer ".concat(n.getID()," could not be added."),onReload:this.addAccount}))),r.a.createElement(D.a,{className:a.addAccountButton,variant:"contained",color:"primary",startIcon:r.a.createElement(V.a,null),onClick:this.addAccount},"Add Account"))}}]),a}(n.Component),lt=Object(x.a)((function(e){return{root:{width:"100%"},accountList:{marginBottom:e.spacing(2)},addAccountButton:{position:"absolute",right:e.spacing(3),bottom:e.spacing(1)}}}))(st),it=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).expansionPanelStateChanged=function(){n.props.onExpandedStateChange(n.props.customer)},n.deleteAccountHandler=function(e){n.setState({accounts:n.state.accounts.filter((function(t){return t.getID()!==e.getID()}))})},n.editCustomerButtonClicked=function(e){e.stopPropagation(),n.setState({showCustomerForm:!0})},n.customerFormClosed=function(e){e?n.setState({customer:e,showCustomerForm:!1}):n.setState({showCustomerForm:!1})},n.deleteCustomerButtonClicked=function(e){e.stopPropagation(),n.setState({showCustomerDeleteDialog:!0})},n.deleteCustomerDialogClosed=function(e){e&&n.props.onCustomerDeleted(e),n.setState({showCustomerDeleteDialog:!1})},n.state={customer:e.customer,showCustomerForm:!1,showCustomerDeleteDialog:!1},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.expandedState,n=this.state,o=n.customer,c=n.showCustomerForm,s=n.showCustomerDeleteDialog;return r.a.createElement("div",null,r.a.createElement(Te.a,{defaultExpanded:!1,expanded:a,onChange:this.expansionPanelStateChanged},r.a.createElement(Le.a,{expandIcon:r.a.createElement(Ue.a,null),id:"customer".concat(o.getID(),"accountpanel-header")},r.a.createElement(N.a,{container:!0,spacing:1,justify:"flex-start",alignItems:"center"},r.a.createElement(N.a,{item:!0},r.a.createElement(v.a,{variant:"body1",className:t.heading},o.getLastName(),", ",o.getFirstName())),r.a.createElement(N.a,{item:!0},r.a.createElement(Re.a,{variant:"text",size:"small"},r.a.createElement(D.a,{color:"primary",onClick:this.editCustomerButtonClicked},"edit"),r.a.createElement(D.a,{color:"secondary",onClick:this.deleteCustomerButtonClicked},"delete"))),r.a.createElement(N.a,{item:!0,xs:!0}),r.a.createElement(N.a,{item:!0},r.a.createElement(v.a,{variant:"body2",color:"textSecondary"},"List of accounts")))),r.a.createElement(Be.a,null,r.a.createElement(lt,{show:a,customer:o}))),r.a.createElement(Fe,{show:c,customer:o,onClose:this.customerFormClosed}),r.a.createElement(Ve,{show:s,customer:o,onClose:this.deleteCustomerDialogClosed}))}}]),a}(n.Component),ut=Object(x.a)((function(e){return{root:{width:"100%"}}}))(it),mt=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).getCustomers=function(){ge.getAPI().getCustomers().then((function(e){return n.setState({customers:e,filteredCustomers:Object(R.a)(e),loadingInProgress:!1,error:null})})).catch((function(e){return n.setState({customers:[],loadingInProgress:!1,error:e})})),n.setState({loadingInProgress:!0,error:null})},n.onExpandedStateChange=function(e){var t=null;e.getID()!==n.state.expandedCustomerID&&(t=e.getID()),n.setState({expandedCustomerID:t})},n.customerDeleted=function(e){var t=n.state.customers.filter((function(t){return t.getID()!==e.getID()}));n.setState({customers:t,filteredCustomers:Object(R.a)(t),showCustomerForm:!1})},n.addCustomerButtonClicked=function(e){e.stopPropagation(),n.setState({showCustomerForm:!0})},n.customerFormClosed=function(e){if(e){var t=[].concat(Object(R.a)(n.state.customers),[e]);n.setState({customers:t,filteredCustomers:Object(R.a)(t),showCustomerForm:!1})}else n.setState({showCustomerForm:!1})},n.filterFieldValueChange=function(e){var t=e.target.value.toLowerCase();n.setState({filteredCustomers:n.state.customers.filter((function(e){var a=e.getFirstName().toLowerCase().includes(t),n=e.getLastName().toLowerCase().includes(t);return a||n})),customerFilter:t})},n.clearFilterFieldButtonClicked=function(){n.setState({filteredCustomers:Object(R.a)(n.state.customers),customerFilter:""})};var r=null;return n.props.location.expandCustomer&&(r=n.props.location.expandCustomer.getID()),n.state={customers:[],filteredCustomers:[],customerFilter:"",error:null,loadingInProgress:!1,expandedCustomerID:r,showCustomerForm:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getCustomers()}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.filteredCustomers,o=a.customerFilter,c=a.expandedCustomerID,s=a.loadingInProgress,l=a.error,i=a.showCustomerForm;return r.a.createElement("div",{className:t.root},r.a.createElement(N.a,{className:t.customerFilter,container:!0,spacing:1,justify:"flex-start",alignItems:"center"},r.a.createElement(N.a,{item:!0},r.a.createElement(v.a,null,"Filter customer list by name:")),r.a.createElement(N.a,{item:!0,xs:4},r.a.createElement(M.a,{autoFocus:!0,fullWidth:!0,id:"customerFilter",type:"text",value:o,onChange:this.filterFieldValueChange,InputProps:{endAdornment:r.a.createElement(U.a,{position:"end"},r.a.createElement(S.a,{onClick:this.clearFilterFieldButtonClicked},r.a.createElement(_.a,null)))}})),r.a.createElement(N.a,{item:!0,xs:!0}),r.a.createElement(N.a,{item:!0},r.a.createElement(D.a,{variant:"contained",color:"primary",startIcon:r.a.createElement(V.a,null),onClick:this.addCustomerButtonClicked},"Add Customer"))),n.map((function(t){return r.a.createElement(ut,{key:t.getID(),customer:t,expandedState:c===t.getID(),onExpandedStateChange:e.onExpandedStateChange,onCustomerDeleted:e.customerDeleted})})),r.a.createElement(ye,{show:s}),r.a.createElement(Ce,{error:l,contextErrorMsg:"The list of customers could not be loaded.",onReload:this.getCustomers}),r.a.createElement(Fe,{show:i,onClose:this.customerFormClosed}))}}]),a}(n.Component),dt=Object(d.f)(Object(x.a)((function(e){return{root:{width:"100%"},customerFilter:{marginTop:e.spacing(2),marginBottom:e.spacing(1)}}}))(mt)),gt=a(314),ht=a(315),ft=a(316),pt=a(317),bt=a(318),Et=a(319),vt=a(234),Ct=a.n(vt),Ot=Object(I.a)("myAccount"),jt=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),n=t.call(this,e),Object.defineProperty(Object(j.a)(n),Ot,{writable:!0,value:null}),n.getTransactions=function(){var e=n.props.location.owner.account;ge.getAPI().getCreditsForAccount(e.getID()).then((function(t){ge.getAPI().getDebitsForAccount(e.getID()).then((function(e){var a=t.concat(e);a.sort(n.transactionComparator),n.setState({transactions:a,transactionsLoadingInProgress:!1,debitsLoadingError:null})})).catch((function(e){return n.setState({transactions:[],debitsLoadingError:e,transactionsLoadingInProgress:!1})})),n.setState({creditsLoadingError:null})})).catch((function(e){return n.setState({transactions:[],transactionsLoadingInProgress:!1,creditsLoadingError:e})})),n.setState({transactionsLoadingInProgress:!0,creditsLoadingError:null,debitsLoadingError:null})},Object(y.a)(Object(j.a)(n),Ot)[Ot]=n.props.location.owner.account,n.state={transactions:[],transactionsLoadingInProgress:!1,creditsLoadingError:null,debitsLoadingError:null},n}return Object(l.a)(a,[{key:"getAccount",value:function(){return Object(y.a)(this,Ot)[Ot]}},{key:"transactionComparator",value:function(e,t){var a=0;return e.getID()<t.getID()&&(a=-1),e.getID()>t.getID()&&(a=1),a}},{key:"componentDidMount",value:function(){this.props.location.owner&&this.getTransactions()}},{key:"renderTransactionRow",value:function(e,t){var a=ge.getAPI().getCurrencyFormatter();return r.a.createElement(gt.a,{key:e.getID()},r.a.createElement(ht.a,{align:"center",component:"th",scope:"row"},e.getID()),r.a.createElement(ht.a,{align:"center"},e.getSourceAccount()),r.a.createElement(ht.a,{align:"center"},e.getTargetAccount()),this.getAccount().getID()===e.getTargetAccount()?r.a.createElement(r.a.Fragment,null,r.a.createElement(ht.a,{align:"right"},a.format(e.getAmount())),r.a.createElement(ht.a,{align:"right"})):r.a.createElement(r.a.Fragment,null,r.a.createElement(ht.a,{align:"left"}),r.a.createElement(ht.a,{align:"left"},a.format(e.getAmount()))),r.a.createElement(ht.a,{align:"center"},a.format(t)))}},{key:"renderTransactions",value:function(){var e=this,t=0;return this.state.transactions.map((function(a){return e.getAccount().getID()===a.getTargetAccount()?t+=a.getAmount():t-=a.getAmount(),e.renderTransactionRow(a,t)}))}},{key:"renderTransactionTable",value:function(){var e=this.state,t=e.transactionsLoadingInProgress,a=e.creditsLoadingError,n=e.debitsLoadingError;if(!t&&!a&&!n)return r.a.createElement(ft.a,{component:E.a},r.a.createElement(v.a,{className:this.props.classes.tableHeader},"List of transactions:"),r.a.createElement(pt.a,null,r.a.createElement(bt.a,null,r.a.createElement(gt.a,null,r.a.createElement(ht.a,{align:"center"},"ID"),r.a.createElement(ht.a,{align:"center"},"Source account"),r.a.createElement(ht.a,{align:"center"},"Target account"),r.a.createElement(ht.a,{align:"right"},"Credit"),r.a.createElement(ht.a,{align:"left"},"Debit"),r.a.createElement(ht.a,{align:"center"},"Balance"))),r.a.createElement(Et.a,null,this.renderTransactions())))}},{key:"render",value:function(){var e=this.props.classes;if(!this.props.location.owner)return r.a.createElement(d.a,{to:"/"});var t=this.props.location.owner,a=t.customer,n=t.account,o=this.state,c=o.transactionsLoadingInProgress,s=o.creditsLoadingError,l=o.debitsLoadingError;return r.a.createElement("div",null,r.a.createElement(v.a,{component:"div",className:e.subNav},r.a.createElement(He.a,{component:m.b,to:{pathname:"/customers",expandCustomer:a}},r.a.createElement(N.a,{container:!0,spacing:1,justify:"flex-start",alignItems:"stretch"},r.a.createElement(N.a,{item:!0},r.a.createElement(Ct.a,null)),r.a.createElement(N.a,{item:!0},"Back to customer list")))),r.a.createElement(E.a,{className:e.root},r.a.createElement(v.a,{variant:"h6"},"Account"),r.a.createElement(v.a,{className:e.accountEntry},"ID: ",n.getID()),r.a.createElement(v.a,null,"Customer: ",a.getLastName(),", ",a.getFirstName())),this.renderTransactionTable(),r.a.createElement(ye,{show:c}),r.a.createElement(Ce,{error:s,contextErrorMsg:"The credits of account ".concat(this.accountID," could not be loaded."),onReload:this.getTransactions}),r.a.createElement(Ce,{error:l,contextErrorMsg:"The debits of account ".concat(this.accountID," could not be loaded."),onReload:this.getTransactions}))}}]),a}(n.Component),yt=Object(d.f)(Object(x.a)((function(e){return{root:{width:"100%",padding:e.spacing(1)},subNav:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},tableHeader:{marginLeft:e.spacing(1),marginTop:e.spacing(2)}}}))(jt)),It=a(320),St=Object(It.a)((function(e){return{root:{width:"100%",marginTop:e.spacing(2),marginBottom:e.spacing(2),padding:e.spacing(1)},content:{margin:e.spacing(1)}}}));var kt=function(){var e=St();return r.a.createElement(E.a,{elevation:0,className:e.root},r.a.createElement("div",{className:e.content},r.a.createElement(v.a,{variant:"h6"},"Python Bank Administration Example Project"),r.a.createElement("br",null),r.a.createElement(v.a,null,"React Frontend written by ",r.a.createElement(He.a,{href:"https://github.com/christophkunz"},"Christoph Kunz")),r.a.createElement(v.a,null,"Python Backend written by ",r.a.createElement(He.a,{href:"https://github.com/PeterThies"},"Peter Thies")),r.a.createElement("br",null),r.a.createElement(v.a,{variant:"body2"},"\xa9 Hochschule der Medien 2020, all rights reserved.")))},At=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).getCustomer=function(){ge.getAPI().getCustomer(n.props.customerID).then((function(e){return n.setState({customer:e,loadingInProgress:!1,loadingError:null})})).catch((function(e){return n.setState({customer:null,loadingInProgress:!1,loadingError:e})})),n.setState({loadingInProgress:!0,loadingError:null})},n.state={customer:null,loadingInProgress:!1,loadingError:null},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getCustomer()}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.customerID,n=e.accountID,o=this.state,c=o.customer,s=o.loadingInProgress,l=o.loadingError;return r.a.createElement(E.a,{variant:"outlined",className:t.root},r.a.createElement(v.a,{variant:"h6"},"Account"),r.a.createElement(v.a,{className:t.accountEntry},"ID: ",n),c?r.a.createElement(v.a,null,"Customer: ",c.getLastName(),", ",c.getFirstName()):null,r.a.createElement(ye,{show:s}),r.a.createElement(Ce,{error:l,contextErrorMsg:"The data of customer id ".concat(a," could not be loaded."),onReload:this.getCustomer}))}}]),a}(n.Component),Pt=Object(x.a)((function(e){return{root:{width:"100%",padding:e.spacing(1),marginTop:e.spacing(1)},accountEntry:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0}}}))(At),wt=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).loadAccounts=function(){ge.getAPI().getAllAccounts().then((function(e){return n.setState({accounts:e,loadingInProgress:!1,loadingError:null})})).catch((function(e){return n.setState({loadingInProgress:!1,loadingError:e})})),n.setState({loadingInProgress:!0,loadingError:null})},n.state={accounts:[],loadingInProgress:!1,loadingError:null},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.loadAccounts()}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.accounts,n=t.loadingInProgress,o=t.loadingError;return r.a.createElement("div",{className:e.root},a.map((function(e){return r.a.createElement(Pt,{key:e.getID(),customerID:e.getOwner().toString(),accountID:e.getID().toString()})})),r.a.createElement(ye,{show:n}),r.a.createElement(Ce,{error:o,contextErrorMsg:"The list of all accounts of the bank could not be loaded.",onReload:this.loadAccounts}))}}]),a}(n.Component),Nt=Object(x.a)((function(e){return{root:{width:"100%"}}}))(wt),Dt=a(235),xt=a(8),Ft="#FFFFFF",Tt=Object(Dt.a)({palette:{black:"#000000",white:Ft,primary:{contrastText:Ft,dark:xt.a.indigo[900],main:xt.a.indigo[500],light:xt.a.indigo[100]},secondary:{contrastText:Ft,dark:xt.a.blue[900],main:xt.a.blue.A400,light:xt.a.blue.A400},success:{contrastText:Ft,dark:xt.a.green[900],main:xt.a.green[600],light:xt.a.green[400]},info:{contrastText:Ft,dark:xt.a.blue[900],main:xt.a.blue[600],light:xt.a.blue[400]},warning:{contrastText:Ft,dark:xt.a.orange[900],main:xt.a.orange[600],light:xt.a.orange[400]},error:{contrastText:Ft,dark:xt.a.red[900],main:xt.a.red[600],light:xt.a.red[400]},text:{primary:xt.a.blueGrey[800],secondary:xt.a.blueGrey[600],link:xt.a.blue[600]},background:{default:"#F4F6F8",paper:Ft},icon:xt.a.blueGrey[600],divider:xt.a.grey[200]}}),Lt=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleSignInButtonClicked=function(){e.props.onSignIn()},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",null,r.a.createElement(v.a,{className:e.root,align:"center",variant:"h6"},"Welcome to the HdM React/Python Project Showcase"),r.a.createElement(v.a,{className:e.root,align:"center"},"It appears, that you are not signed in."),r.a.createElement(v.a,{className:e.root,align:"center"},"To use the services of the HdM Bank please"),r.a.createElement(N.a,{container:!0,justify:"center"},r.a.createElement(N.a,{item:!0},r.a.createElement(D.a,{variant:"contained",color:"primary",onClick:this.handleSignInButtonClicked},"Sign in with Google"))))}}]),a}(n.Component),Bt=Object(x.a)((function(e){return{root:{margin:e.spacing(2)}}}))(Lt),Rt={},Mt=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleAuthStateChange=function(e){e?(n.setState({authLoading:!0}),e.getIdToken().then((function(t){document.cookie="token=".concat(t,";path=/"),n.setState({currentUser:e,authError:null,authLoading:!1})})).catch((function(e){n.setState({authError:e,authLoading:!1})}))):(document.cookie="token=;path=/",n.setState({currentUser:null,authLoading:!1}))},n.handleSignIn=function(){n.setState({authLoading:!0});var e=new b.a.auth.GoogleAuthProvider;b.a.auth().signInWithRedirect(e)},n.state={currentUser:null,appError:null,authError:null,authLoading:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){b.a.initializeApp(Rt),b.a.auth().languageCode="en",b.a.auth().onAuthStateChanged(this.handleAuthStateChange)}},{key:"render",value:function(){var e=this.state,t=e.currentUser,a=e.appError,n=e.authError,o=e.authLoading;return r.a.createElement(g.a,{theme:Tt},r.a.createElement(h.a,null),r.a.createElement(m.a,{basename:"/static/reactclient"},r.a.createElement(f.a,{maxWidth:"md"},r.a.createElement(B,{user:t}),t?r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{from:"/",to:"customers"}),r.a.createElement(d.b,{exact:!0,path:"/customers"},r.a.createElement(dt,null)),r.a.createElement(d.b,{path:"/transactions"},r.a.createElement(yt,null)),r.a.createElement(d.b,{path:"/accounts"},r.a.createElement(Nt,null)),r.a.createElement(d.b,{path:"/about",component:kt})):r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{to:"/index.html"}),r.a.createElement(Bt,{onSignIn:this.handleSignIn})),r.a.createElement(ye,{show:o}),r.a.createElement(Ce,{error:n,contextErrorMsg:"Something went wrong during sighn in process.",onReload:this.handleSignIn}),r.a.createElement(Ce,{error:a,contextErrorMsg:"Something went wrong inside the app. Please reload the page."}))))}}],[{key:"getDerivedStateFromError",value:function(e){return{appError:e}}}]),a}(r.a.Component);c.a.render(r.a.createElement(Mt,null),document.getElementById("root"))}},[[242,1,2]]]);
//# sourceMappingURL=main.2f78571b.chunk.js.map